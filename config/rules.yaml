version: "1"
defaults:
  unmatched: "escalate"
  max_budget_per_agent: 5.00
  max_turns_per_agent: 50

rules:
  # ALLOW - auto-approve without prompting
  - name: "Allow read-only tools"
    action: allow
    tool: "Read|Glob|Grep"

  - name: "Allow edits within src/"
    action: allow
    tool: "Write|Edit"
    match:
      file_path:
        - pattern: "^.*/src/.*"
          type: regex

  - name: "Allow edits within ~/.config"
    action: allow
    tool: "Write|Edit"
    match:
      file_path:
        - pattern: "^/Users/romain\\.c8t/\\.config/.*"
          type: regex

  - name: "Allow safe dev commands"
    action: allow
    tool: Bash
    match:
      command:
        - pattern: "^(npm|npx|yarn|pnpm)\\s+(test|lint|build|run|check|tsc)"
          type: regex
        - pattern: "^git\\s+(status|log|diff|branch|show|add|commit)"
          type: regex
